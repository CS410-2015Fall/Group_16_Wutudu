<ion-view hide-nav-bar="false" view-title="Friends">
  <ion-content>
    <ion-refresher
      pulling-text="Pull to refresh..."
      on-refresh="doRefresh()">
    </ion-refresher>

    <div class="list">
      <div class="item item-input-inset">
        <label class="item-input-wrapper">
          <input type="email" lowercase placeholder="Email" ng-model="data.friendToAdd">
        </label>
        <button class="button button-small" ng-click="addFriend()">
          Add Friend
        </button>
      </div>
    </div>

    <ion-item class="item item-divider"
              ng-click="toggleList(0)"
              ng-class="{active: listsShow[0]}">
      <i class="icon" ng-class="listsShow[0] ? 'ion-minus' : 'ion-plus'"></i>
      &nbsp;
      Friends ({{friends.length}})
    </ion-item>

    <ion-list can-swipe="true">
      <ion-item ng-repeat="friend in friends", ng-show="listsShow[0]">
        <span class="ion-person"></span>
        <span class="padding-left padding-right">{{friend.name}}
          <span class="item-note">{{friend.email}}</span>
        </span>
        <ion-option-button class="button-assertive" ng-click="removeFriend(friend)">
          Unfriend
        </ion-option-button>
      </ion-item>
    </ion-list>

    <ion-item class="item item-divider"
              ng-click="toggleList(1)"
              ng-class="{active: listsShow[1]}">
      <i class="icon" ng-class="listsShow[1] ? 'ion-minus' : 'ion-plus'"></i>
      &nbsp;
      Received Invitations ({{receivedRequests.length}})
    </ion-item>

    <ion-list can-swipe="true">
      <ion-item ng-repeat="receivedRequest in receivedRequests", ng-show="listsShow[1]">
        <span class="ion-android-send rotate-180 inline-block"></span>
        <span class="padding-left padding-right">
          {{receivedRequest.name}}
          <span class="item-note">{{receivedRequest.email}}</span>
        </span>
        <ion-option-button class="button-balanced" ng-click="acceptFriend(receivedRequest)">
          Accept
        </ion-option-button>
        <ion-option-button class="button-assertive" ng-click="removeFriend(receivedRequest)">
          Decline
        </ion-option-button>
      </ion-item>
    </ion-list>

    <ion-item class="item item-divider"
              ng-click="toggleList(2)"
              ng-class="{active: listsShow[2]}">
      <i class="icon" ng-class="listsShow[2] ? 'ion-minus' : 'ion-plus'"></i>
      &nbsp;
      Sent Invitations ({{sentRequests.length}})
    </ion-item>

    <ion-list can-swipe="true">
      <ion-item ng-repeat="sentRequest in sentRequests", ng-show="listsShow[2]">
        <span class="ion-android-send"></span>
        <span class="padding-left padding-right">
          {{sentRequest.name}}
          <span class="item-note">{{sentRequest.email}}</span>
        </span>
        <ion-option-button class="button-assertive" ng-click="cancelInvite(sentRequest)">
          Cancel
        </ion-option-button>
      </ion-item>
    </ion-list>

  </ion-content>
</ion-view>
